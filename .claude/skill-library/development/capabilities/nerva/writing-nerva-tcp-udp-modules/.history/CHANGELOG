# Changelog

## 2025-12-29 - Initial Creation

### RED Phase Documentation

**Gap identified:** No standardized guidance for creating fingerprintx service fingerprinting plugins. Developers must:
- Study existing plugins to understand patterns
- Reverse-engineer Plugin interface requirements
- Figure out three-file integration (plugin.go, types.go, plugin_list.go)
- Learn binary protocol parsing patterns from scratch

**Test scenario:** "Create a Memcached fingerprinting plugin for fingerprintx"

**Expected failure behavior without skill:**
- Missing registration in plugin_list.go
- Incorrect PortPriority implementation
- No two-phase detection pattern
- Missing CPE generation
- Incomplete wire protocol documentation

### Skill Configuration

- **Location:** Library (`development/capabilities/`)
- **Type:** Process/Pattern
- **Line count:** 329 (target <500)

### Files Created

- `SKILL.md` - Main skill file with plugin interface, file checklist, two-phase detection
- `references/wire-protocol-patterns.md` - Binary protocol parsing patterns
- `references/plugin-utils-api.md` - Network I/O helpers documentation

### Source Material

- MongoDB PR #45 analysis (comprehensive two-phase detection example)
- fingerprintx codebase exploration (plugin architecture, type system)
- Existing plugins: Redis (simple), MongoDB (complex), HTTPS (TLS), DNS (UDP)

## $(date +%Y-%m-%d) - TLS Connection Handling Documentation

**RED**: Kubernetes plugin (PR #61) shipped with TLS double-wrapping bug because skill didn't document that plugins.TCPTLS means connection is already TLS-wrapped.

**Changes**:
- Added "TLS Connection Handling (CRITICAL)" section after Protocol Type Reference
- Documented what fingerprintx does (establishes TLS) vs plugin responsibility (use existing conn)
- Included WRONG pattern (TLS-over-TLS with https:// scheme) with error symptom
- Included CORRECT pattern (detect *tls.Conn, use http:// scheme for already-encrypted)
- Added real-world example from kubernetes plugin bug
- Added "TLS double-wrapping" to Common Pitfalls table
- Added TCPTLS test requirement to Testing Checklist

**GREEN**: Future developers implementing TCPTLS plugins will now see explicit documentation preventing this bug pattern.
