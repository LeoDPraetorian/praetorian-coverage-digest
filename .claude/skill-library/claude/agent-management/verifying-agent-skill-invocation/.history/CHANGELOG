# Changelog

All notable changes to this skill.

- **2025-12-13**: Enhance to iterate through ALL skills when only agent is provided. Current behavior tests one skill at a time. New behavior: (1) When agent+skill provided: test that single skill (existing behavior). (2) When only agent provided: Extract ALL skills from frontmatter 'skills:' field, separate gateway skills from non-gateway skills. For each non-gateway skill (primary): run the behavioral testing workflow (spawn agent, evaluate skill invocation). For each gateway skill: Read the gateway to discover all library skill paths it routes to, then for each discovered library skill (secondary): run the behavioral testing workflow. Use testing-skills-with-subagents methodology for pressure testing each skill - create trigger scenarios with 3+ combined pressures, spawn agent with Task tool, evaluate if agent invokes skill AND follows methodology under pressure. Add new sections: Step 1b: Discover Secondary Skills via Gateways (parse gateway skill to extract library paths), Updated Step 2: Create TodoWrite with ALL discovered skills (primary + secondary). The iteration should test primary skills first, then secondary skills grouped by gateway.

## [Changed] - 2025-12-27

### Added Intelligent Gateway Parsing and Coverage Check

**RED Failure:**
- Step 1b was vague ("extract library skill paths") - didn't specify HOW to select appropriate skills from 25+ gateway skills
- No detection of "dead skills" (in frontmatter but no invocation guidance in agent body)
- Testing all gateway skills would take days with no prioritization

**GREEN Solution:**
- Added Step 0.5: Frontmatter-Body Coverage Check - Detects dead skills before testing
- Enhanced Step 1b with intelligent gateway parsing:
  - **Tier 1 (Mandatory)**: Extract from gateway's "Mandatory for All X Work" section
  - **Tier 2 (Agent-Matched)**: Parse agent body for domain keywords, cross-reference with gateway Quick Reference
  - **Tier 3 (Optional)**: Remaining gateway skills (test if time permits)
- Updated TodoWrite tracking to show tiered structure
- Updated Step 7 reporting to show coverage check + tiered results
- Updated Quick Reference with new timings for tiered testing

**Impact:**
- Coverage check prevents testing agents with incomplete skill guidance
- Tier 1 ensures mandatory skills always tested
- Tier 2 tests agent-relevant skills (high value)
- Tier 3 optional (low priority)
- Reduces testing time from 8-15 hrs (all skills) to 3-6 hrs (Primary + Tier 1 + Tier 2)

**REFACTOR Status:** DEFERRED
- Reason: This is a testing skill that tests other skills - meta-testing requires careful scenario design
- Plan documented above (5 test scenarios)
- Recommend follow-up session for comprehensive pressure testing
- Current update: Logic changes verified, workflow clear, no obvious loopholes detected

## [Changed] - 2026-01-04

### Updated Output Directory Structure

**RED Failure:**
- Skill referenced deprecated `.claude/features/{date}-{slug}/` directory structure
- Used outdated date format instead of timestamp format
- Inconsistent with `orchestrating-research` and other skills using `.claude/.output/`

**GREEN Solution:**
- Line 325: Changed directory check from `.claude/features/{date}-{slug}/` to `.claude/.output/testing/{timestamp}-{slug}/`
- Line 340: Updated JSON metadata example from `"feature_directory": ".claude/features/..."` to `"feature_directory": ".claude/.output/testing/..."`
- Added timestamp format documentation (lines 326-327):
  - Format: `date +"%Y-%m-%d-%H%M%S"` (e.g., `2026-01-03-152847`)
  - Clarified slug usage

**Impact:**
- Aligns with standardized output directory structure across all skills
- Matches `orchestrating-research` timestamp format pattern
- Testing outputs now organized under `.claude/.output/testing/` subdirectory
- Improved clarity for agents verifying skill invocation outputs

**Line Count:** 575 lines (increased from 571 due to timestamp documentation)
- Note: Exceeds 500-line hard limit by 75 lines
- Recommendation: Future refactoring task to extract sections to references/

**REFACTOR Status:** Not performed (minor documentation update, no behavioral changes)
