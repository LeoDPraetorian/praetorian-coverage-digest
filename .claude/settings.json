{
  "model": "opus",
  "env": {
    "BASH_DEFAULT_TIMEOUT_MS": "1800000",
    "BASH_MAX_TIMEOUT_MS": "1800000"
  },
  "permissions": {
    "allow": [
      "Skill(managing-skills)",
      "Skill(skill-manager)",
      "Skill(verifying-before-completion)",
      "Skill(gateway-tools)",
      "Skill(persisting-agent-outputs)",
      "Bash(npm run test:*)",
      "Bash(npm test :*)",
      "Bash(git status)",
      "Bash(git diff :*)",
      "Bash(git log :*)",
      "Bash(git add :*)",
      "Bash(git commit :*)",
      "Bash(git config :*)",
      "Bash(git tag :*)",
      "Bash(git branch :*)",
      "Bash(git checkout :*)",
      "Bash(git fetch :*)",
      "Bash(git merge :*)",
      "Bash(git pull :*)",
      "Bash(gh pr create :*)",
      "Bash(gh pr comment :*)",
      "Bash(gh api :*)",
      "Bash(gh search code :*)",
      "Bash(gh search repos :*)",
      "Bash(jq :*)",
      "Bash(node :*)",
      "Bash(which :*)",
      "Bash(pwd)",
      "Bash(ls :*)",
      "Bash(npx tsc :*)",
      "Bash(npx eslint :*)",
      "Bash(go vet :*)",
      "Bash(go test :*)",
      "Bash(go build :*)",
      "Bash(golangci-lint :*)",
      "Bash(velociraptor :*)",
      "Bash(nuclei -validate :*)",
      "Bash(grep :*)",
      "Bash(wc :*)"
    ],
    "deny": [
      "Bash(rm -rf /)",
      "Bash(curl)",
      "Bash(wget)",
      "Bash(eval :*)",
      "Bash(make deploy:*)",
      "Bash(make purge)",
      "Bash(go run */user-purge/*)",
      "Bash(git push --tags)"
    ]
  },
  "hooks": {
    "UserPromptSubmit": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/session-reminder.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/agent-first-enforcement.sh",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/compaction-gate-enforcement.sh",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "mcp__salesforce__.*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/enforce-salesforce-wrappers.sh"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/track-modifications.sh",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/capture-agent-result.sh",
            "timeout": 10
          },
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/task-skill-enforcement.sh",
            "timeout": 5
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/iteration-limit-stop.sh",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/feedback-loop-stop.sh",
            "timeout": 15
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/quality-gate-stop.sh",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/escalation-advisor.sh",
            "timeout": 90
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/output-location-enforcement.sh",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "You are verifying a subagent completed its assigned task. This is a lightweight check - the main Stop hook handles the full review/test cycle.\n\n## Verify Task Completion\n\nCheck if the subagent accomplished what it was asked to do:\n- Did it make the requested changes?\n- Did it encounter errors that prevent completion?\n- Is the work in a returnable state?\n\n## Decision\n\nIf subagent completed its assigned task (even partially) â†’ return {\"ok\": true}\nLet the main agent's Stop hook enforce review/test requirements.\n\nOnly block if the subagent clearly failed or left work in broken state:\n{\"ok\": false, \"reason\": \"Subagent task incomplete: [specific issue]. Fix before returning.\"}\n\nRespond with ONLY the JSON object.",
            "timeout": 30
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "startup|resume|clear|compact",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/session-start.sh"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/precompact-context.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PROJECT_DIR}/.claude/hooks/sound-notification.sh play"
          }
        ]
      }
    ]
  },
  "extraKnownMarketplaces": {
    "chariot": {
      "source": {
        "source": "directory",
        "path": "./"
      }
    }
  },
  "enabledPlugins": {
  },
  "includeCoAuthoredBy": false,
  "enableAllProjectMcpServers": false,
  "enabledMcpjsonServers": [],
  "disabledMcpjsonServers": []
}
