# Changelog

All notable changes to the orchestrating-feature-development skill will be documented in this file.

## [Date: 2026-01-10]

### Changed - Phase 2 Discovery Integration with discovering-codebases-for-planning

Replaced fixed 2-agent Explore dispatch with feature-context-aware discovery skill.

#### What Changed

**Phase 2 Discovery now uses `discovering-codebases-for-planning` skill:**
- Dynamic agent count (1-10) based on feature context and codebase size
- Three-stage process: Scoping → Parallel Discovery → Synthesis
- Structured outputs: discovery.md + file-placement.md + discovery-summary.json

#### Files Modified

1. **SKILL.md Updates:**
   - Quick Reference table Phase 2 row: "discovering-codebases-for-planning | PARALLEL (dynamic)"
   - Workflow diagram Phase 2 box: THREE-STAGE with skill invocation details
   - Required Sub-Skills table: Added discovering-codebases-for-planning to Phase 2
   - Integration "Requires" table: Added discovering-codebases-for-planning entry
   - Integration "Spawns" table: Removed Phase 2 Explore ×2, added note that spawning handled by skill
   - Agent Matrix table: Updated Discovery column to show discovering-codebases-for-planning (1-10 agents)
   - Exit Criteria: Updated to reference new discovery artifacts

2. **references/phase-2-discovery.md:**
   - Complete rewrite with three-stage workflow
   - Skill invocation instructions
   - Stage breakdown (Scoping, Parallel Discovery, Synthesis)
   - Handoff protocol to Phase 3 and Phase 4
   - metadata.json update schema
   - Error handling scenarios

3. **references/prompts/explore-prompt.md:**
   - Added header note: "This prompt template is now used internally by the discovering-codebases-for-planning skill"

#### Why This Changed

**Previous approach (fixed 2 Explore agents):**
- No feature-context filtering (analyzed everything)
- Fixed parallelization regardless of codebase size
- Unstructured handoff (just markdown files)

**New approach (discovering-codebases-for-planning):**
- Only analyzes components RELEVANT to feature
- Dynamic agent count (1-10) based on actual scope
- Structured output (JSON + markdown) for downstream planning

#### Backward Compatibility

- discovery.md still produced (same file, same format)
- frontend-discovery.md and backend-discovery.md replaced by unified discovery.md
- New artifacts are ADDITIONS (file-placement.md, discovery-summary.json)
- Phase 3 and Phase 4 can consume new or old format

## [Date: 2026-01-06]

### Added - Skill Composition Patterns (MAJOR ARCHITECTURE UPDATE)

Based on analysis of [obra/superpowers](https://github.com/obra/superpowers), implemented explicit skill chaining patterns.

#### REQUIRED SUB-SKILL Directives
- Added `**REQUIRED SUB-SKILL:**` inline directives to each phase in workflow diagram
- Added summary table of required and conditional sub-skills at top of workflow section
- Each phase now explicitly declares which skills must be invoked

#### Integration Section (replaces Related Skills)
- **Called By**: Documents what invokes this skill (/feature command)
- **Requires**: Skills that must be invoked before/at start (persisting-agent-outputs, orchestrating-multi-agent-workflows)
- **Calls**: Skills invoked during execution (brainstorming, writing-plans, finishing-a-development-branch)
- **Conditional**: Skills triggered by complexity (developing-with-subagents, persisting-progress-across-sessions, dispatching-parallel-agents)
- **Agent Skills**: Skills embedded in prompt templates for subagents
- **Alternative Workflows**: When to use executing-plans vs developing-with-subagents

#### Prompt Templates (NEW)
Created `references/prompts/` directory with 6 prompt templates:
- `explore-prompt.md` - Phase 2 Discovery agents
- `architect-prompt.md` - Phase 4 Lead agents
- `developer-prompt.md` - Phase 5 Implementation agents
- `reviewer-prompt.md` - Phase 6 Review agents (two-stage: spec compliance + code quality)
- `test-lead-prompt.md` - Phase 7 and 9 Test Lead
- `tester-prompt.md` - Phase 8 Tester agents

Each template includes:
- MANDATORY SKILLS list embedded in prompt
- OUTPUT_DIRECTORY placeholder
- Structured output format with metadata JSON
- Blocked status handling with blocked_reason

#### Two-Stage Review Pattern
- Phase 6 now has explicit two-stage review following obra pattern:
  1. **Spec Compliance Review** - Does code match plan? (must pass first)
  2. **Code Quality Review** - Is code well-built? (only after spec compliance passes)

#### /feature Command
- Simplified to thin wrapper: "Invoke the skill and follow it exactly"
- Updated description to reflect 10 phases

### Changed
- **Workflow diagram**: Enhanced with REQUIRED SUB-SKILL and PROMPT TEMPLATE references
- **Phase 6 gate checklist**: Added spec compliance confirmation before code quality
- **Related Skills section**: Replaced with comprehensive Integration section

### Technical Details
- SKILL.md: Updated workflow section with skill composition patterns
- 6 new files in references/prompts/ (~200 lines each)
- /feature command simplified to 9 lines

### Reason
- **Gap Identified**: Skills listed in agent `skills:` field but not reliably invoked
- **Gap Identified**: Orchestrator doesn't control subagent context
- **Gap Identified**: Missing spec compliance validation before code quality review
- **Solution**: Adopt obra/superpowers patterns - explicit REQUIRED SUB-SKILL directives, Integration sections, prompt templates with mandatory skills embedded

### Related Architecture Documentation
- `.claude/docs/orchestration/MULTI-AGENT-ORCHESTRATION-ARCHITECTURE.md` - Updated with Skill Composition Patterns section

---

## [Date: 2026-01-05]

### Added - Rationalization Prevention (MAJOR WORKFLOW ENHANCEMENT)
- **New Section: Rationalization Prevention** - Added after "Critical Rules" with references to shared prevention patterns
- **New File: references/rationalization-table.md** - Domain-specific rationalization table with phase-by-phase denial patterns
- **Gate Checklists Added** - Explicit gate checklists for phases 1, 3, 4, 6, and 9 with human checkpoints
- **Updated Exit Criteria** - Added three new criteria for rationalization detection and gate checklist compliance

### Changed
- **Phase 1 Gate**: Added checklist with design.md existence, user requirement capture, edge case identification, human approval
- **Phase 3 Gate**: Added checklist with plan.md steps, file paths, code examples, dependencies, human approval
- **Phase 4 Gate**: Added checklist with architecture artifacts, security assessment, tech debt analysis, registry update, human approval
- **Phase 6 Gate**: Added checklist with reviewer approval status, retry limit (max 1), escalation requirement
- **Phase 9 Gate**: Added checklist with test-lead validation, quality score threshold (≥70), retry limit, escalation requirement

### Rationalization Prevention Details
- **Statistical Evidence**: References shared data (technical debt ~10% fix rate, 'later' ~5% completion)
- **Phrase Detection**: Links to pattern detection ('close enough', 'just this once', 'I'll fix it later')
- **Override Protocol**: Requires AskUserQuestion with explicit risk disclosure
- **10 Phase-Specific Tables**: Covers all phases from Brainstorming through Completion
- **Cross-Phase Patterns**: Includes rationalizations that span multiple phases

### Technical Details
- SKILL.md: Updated from 354 lines to 403 lines (under 500-line limit ✅)
- New file: references/rationalization-table.md (88 lines)
- Workflow diagram enhanced with gate checklists embedded in phase boxes
- Exit criteria expanded from 9 items to 12 items

### Reason
- **RED Failure**: Agents were able to rationalize skipping critical phases without explicit detection or enforcement
- **Missing Gates**: No explicit checklist requirements before proceeding from human checkpoint phases
- **Implicit Standards**: Exit criteria lacked explicit rationalization and gate checklist verification
- **Solution**: Add comprehensive rationalization prevention with phase-specific denial patterns and explicit gate checklists

### Related Skills
- `using-skills` - Shared rationalization prevention reference material
- `persisting-agent-outputs` - Agent output format compliance
- `orchestrating-multi-agent-workflows` - Agent routing and workflow patterns

---

## [Date: 2026-01-04]

### Changed - Centralized Handoff Format (DOCUMENTATION REFACTOR)
- **Standardized output format**: All agents must now follow `persisting-agent-outputs` skill for handoff structure
- **Removed duplicate format definition**: references/agent-handoffs.md now references centralized format instead of defining its own
- **Updated field names**: `recommended_agent` → `next_agent` to match centralized format
- **Added orchestrator routing**: When `status: blocked`, agents set `next_agent: null` and orchestrator uses `orchestrating-multi-agent-workflows` routing table based on `blocked_reason`

### Added
- **New required fields for blocked status**:
  - `blocked_reason`: Category for routing table lookup (security_concern, architecture_decision, missing_requirements, test_failures, out_of_scope, unknown)
  - `attempted`: Array documenting what agent tried before blocking
- **Cross-references**: Added `persisting-agent-outputs` and `orchestrating-multi-agent-workflows` to Related Skills section

### Updated Examples
- **Standard Handoff Format**: Now references `persisting-agent-outputs` with key rules for blocked vs complete status
- **Field Descriptions**: References `persisting-agent-outputs/references/metadata-format.md` for complete definitions
- **Blocked Handoff Example**: Updated to match centralized format with `blocked_reason` and `attempted` fields
- **handoff.next_agent section**: Explains orchestrator-based routing pattern

### Reason
- **RED Failure**: orchestrating-feature-development had duplicate handoff format definition that conflicted with centralized `persisting-agent-outputs` skill
- **Routing Contradiction**: Used `recommended_agent` field contradicting "orchestrator decides routing" principle from `orchestrating-multi-agent-workflows`
- **Missing Routing Fields**: Lacked `blocked_reason` and `attempted` fields needed for routing table lookup
- **Solution**: Centralize to single source of truth (`persisting-agent-outputs`) and enforce orchestrator-based routing when blocked

### Technical Details
- SKILL.md: Updated from 355 lines to 354 lines (under 500-line limit ✅)
- references/agent-handoffs.md: Updated from 347 lines to 365 lines (under 500-line limit ✅)
- All `recommended_agent` references replaced with `next_agent` pattern
- Zero grep matches for `recommended_agent` after update

### Related Skills
- `persisting-agent-outputs` - Single source of truth for agent output format
- `orchestrating-multi-agent-workflows` - Agent routing table for blocked status handling

---

## [Date: 2025-12-30]

### Added - Phase 2: Discovery (MAJOR WORKFLOW ADDITION)
- **New Phase 2: Discovery** - Parallel pattern analysis using code-pattern-analyzer agents
- **Workflow expanded from 9 phases to 10 phases** with discovery phase insertion
- **Phase numbering renumbered**: All phases after Brainstorming shifted by +1
  - Phase 2: Planning → Phase 3: Planning
  - Phase 3: Architecture → Phase 4: Architecture
  - Phase 4: Implementation → Phase 5: Implementation
  - Phase 5: Code Review → Phase 6: Code Review
  - Phase 6: Test Planning → Phase 7: Test Planning
  - Phase 7: Testing → Phase 8: Testing
  - Phase 8: Test Validation → Phase 9: Test Validation
  - Phase 9: Completion → Phase 10: Completion

### Changed
- **Phase 4 (Architecture)**: Now receives discovery reports as input and performs tech debt analysis
- **Human Checkpoints**: Updated to phases 1, 3, and 4 (was 1, 2, and 3)
- **metadata.json schema**: Added discovery phase tracking with frontend/backend completion flags
- **metadata.json schema**: Added architecture phase tech debt tracking fields
- **Feature Directory Structure**: Added frontend-discovery.md, backend-discovery.md, tech-debt-assessment.md
- **Agent Matrix**: Added Discovery column showing code-pattern-analyzer ×2 for all feature types
- **Exit Criteria**: Added discovery reports and tech debt registry requirements

### Discovery Phase Design
- **Execution**: PARALLEL - frontend and backend analyzers run simultaneously
- **Agents**: code-pattern-analyzer (frontend focus) + code-pattern-analyzer (backend focus)
- **Scope**: Frontend analyzer targets modules/*/ui/src/*, backend analyzer targets modules/*/backend/*
- **Tool**: Uses discovering-reusable-code skill methodology
- **Outputs**:
  - frontend-discovery.md - Frontend pattern analysis
  - backend-discovery.md - Backend pattern analysis
- **Checkpoint**: NO human checkpoint after discovery (feeds into Architecture phase)
- **Objective**: Discovery agents report patterns WITHOUT judgment - leads apply judgment in Phase 4

### Architecture Phase Enhancements (Phase 4)
- **New Inputs**: frontend-discovery.md + backend-discovery.md from Phase 2
- **New Responsibilities**:
  1. Read discovery reports
  2. Analyze pattern quality (good code vs tech debt)
  3. For each pattern: decide extend or refactor
  4. Propose refactoring plans for tech debt
  5. Output tech debt assessment
- **New Output**: tech-debt-assessment.md documenting tech debt findings
- **Tech Debt Registry**: Leads populate .claude/tech-debt-registry.md REGARDLESS of human decision
- **Human Checkpoint Enhanced**: Present tech debt findings with options:
  - A) Refactor (with plan)
  - B) Extend anyway (document debt)

### Tech Debt Registry Integration
- **Location**: .claude/tech-debt-registry.md (repository root)
- **Populated By**: Lead agents during Architecture phase (Phase 4)
- **Growth Pattern**: Organic accumulation over time across all features
- **Format**: Markdown with pattern name, location, identified date, feature ID, issue description, recommendation, status

### Reason
- **RED Failure**: Current workflow lacks pattern discovery phase, causing implementations to add special-casing (`if newFeature {}`) throughout codebase instead of extending existing patterns
- **Root Cause**: Developers don't know what reusable patterns exist before designing/implementing
- **Impact**: Code duplication, inconsistent patterns, tech debt accumulation
- **Solution**:
  1. New Discovery phase (Phase 2) performs exhaustive pattern search BEFORE planning
  2. Parallel execution (frontend + backend) handles large codebase context limits
  3. Leads receive discovery reports and assess tech debt in Architecture phase
  4. Tech debt registry grows organically as features discover problematic patterns
  5. Human decides extend vs refactor at Architecture checkpoint (not after discovery)

### Technical Details
- SKILL.md: Updated from 321 lines to ~355 lines (under 500-line limit)
- Quick Reference table: Updated with Phase 2 Discovery row
- Workflow diagram: Expanded to show Phase 2 with parallel agents
- Agent Matrix: Added Discovery column showing ×2 agents for all types
- All phase number references updated throughout document
- Related Skills: Added discovering-reusable-code reference

### Related Components
- `.claude/skills/discovering-reusable-code/SKILL.md` - Pattern discovery methodology
- `.claude/agents/research/code-pattern-analyzer.md` - Discovery agent implementation
- `.claude/tech-debt-registry.md` - Central tech debt tracking (NEW)

---

## [Date: 2025-12-28]

### Changed (MAJOR WORKFLOW REDESIGN)
- **Workflow expanded from 5 phases to 8 phases** with parallel agent execution
- **Phase 3 (Architecture)**: Now uses domain leads (frontend-lead, backend-lead) + security-lead in PARALLEL instead of architect + reviewer pattern
- **Phase numbering shifted**: Testing moved from Phase 5 to Phase 6
- **Agent matrix updated**: Uses new agent names (frontend-lead, backend-lead, frontend-reviewer, frontend-security, etc.)

### Added
- **Phase 0: Setup** - Create feature directory with semantic naming (YYYY-MM-DD-{feature-name})
- **Phase 5: Code Review (NEW)** - Parallel code + security reviewers with explicit feedback loop (MAX 1 RETRY)
- **Phase 7: Test Assessment (NEW)** - Quality gate using test-lead with feedback loop (MAX 1 RETRY)
- **Feedback Loop Pattern**: MAX 1 RETRY then escalate to user (no infinite loops)
- **Parallel Execution Rules**: MANDATORY for independent agents in single Task message
- **Feature Directory Structure**: Centralized outputs to `.claude/.output/features/YYYY-MM-DD-{name}/`

### New Reference Files
- `references/phase-5-code-review.md` - Parallel reviewers + feedback loop workflow
- `references/phase-7-test-assessment.md` - Test quality gate workflow

### Updated Reference Files
- `references/phase-3-architecture.md` - Rewritten for frontend-lead + security-lead pattern
- `references/phase-4-implementation.md` - Updated references to new Phase 5
- `references/phase-6-testing.md` - Renamed from phase-5, updated for parallel test modes

### Reason
- **RED Failure**: Architecture phase ran frontend-lead alone without security assessment. Security-lead only involved later (or never), missing early security review.
- **Additional Gap**: No code review phase existed - implementation went directly to testing without quality gate.
- **Additional Gap**: No test assessment phase - tests were written but quality not validated.
- **Solution**:
  1. Security-lead always included in architecture (Phase 3), spawned in parallel
  2. New Code Review phase (Phase 5) with parallel code + security reviewers
  3. New Test Assessment phase (Phase 7) with quality gate
  4. MAX 1 RETRY feedback loops prevent infinite loops

### Technical Details
- SKILL.md: 299 lines (compliant)
- phase-3-architecture.md: 328 lines (compliant)
- phase-5-code-review.md: 303 lines (compliant)
- phase-6-testing.md: 293 lines (compliant)
- phase-7-test-assessment.md: 285 lines (compliant)
- All files under 500-line limit ✅

### Agent Matrix
| Type | Leads (Phase 3) | Developers (Phase 4) | Reviewers (Phase 5) | Testers (Phase 6) |
|------|-----------------|----------------------|---------------------|-------------------|
| Frontend | frontend-lead + security-lead | frontend-developer | frontend-reviewer + frontend-security | frontend-tester ×3 |
| Backend | backend-lead + security-lead | backend-developer | backend-reviewer + backend-security | backend-tester ×3 |
| Full-stack | All 4 leads | Both developers | All 4 reviewers | All 6 testers |

---

## [Date: 2025-12-22]

### Changed
- **Phase 3 (phase-3-architecture.md)**: Added Step 8 for handling `needs_review` status from architecture agents
- **Exit Criteria**: Updated to explicitly require handling of `needs_review` status before proceeding to Phase 4
- **File Organization**: Extracted conflict resolution examples to `references/conflict-resolution-examples.md` for better organization (reduced main file from 439 to 496 lines after adding Step 8)

### Added
- **Step 8: Check Architecture Review Status and Revise Plan if Needed**
  - Handles `status='needs_review'` from architect/reviewer agents
  - Provides loop-back mechanism to Phase 2 (planning) when critical issues found
  - Offers user choice: revise plan, proceed with risks documented, or get more details
  - Documents plan revision workflow with progress file updates
  - Includes risk documentation template for "proceed with risks" path
- **New reference file**: `references/conflict-resolution-examples.md` with state management and component structure examples

### Reason
- **RED Failure**: Phase 3 workflow only handled `status='blocked'` but NOT `status='needs_review'`. When reviewer returned critical issues with `needs_review` status, the workflow incorrectly proceeded to Phase 4 without revising the plan, causing developers to implement flawed designs.
- **Impact**: This created a gap where architecture quality issues identified during review were ignored, leading to preventable implementation problems.
- **Solution**: New Step 8 checks agent status codes and provides structured decision flow for handling critical architecture feedback before implementation begins.

### Technical Details
- Steps renumbered: Old Step 8 → Step 9, Old Step 9 → Step 10
- New Step 8 inserted between Step 7 (validation) and Step 9 (progress update)
- Exit criteria now explicitly checks for `status="complete"` NOT `"needs_review"` or `"blocked"`
- Supports both plan revision (loop back to Phase 2) and risk acceptance (document in architecture.md)
- Final file size: 496 lines (under 500-line hard limit)

### REFACTOR
**Pressure Tests Run:**
- Test 1: Time pressure + Sunk cost - Agent must use AskUserQuestion, cannot auto-proceed
- Test 2: Authority pressure + Economic stakes - Agent must use AskUserQuestion despite CTO approval

**Test Results:**
- ✅ PASSED: Step 8 mandates AskUserQuestion, blocks automatic proceed to Phase 4
- ✅ PASSED: No exception for authority overrides or business pressure
- ⚠️ POTENTIAL LOOPHOLE IDENTIFIED: Agent might rationalize "stakeholders already said proceed" as implicit user input

**Recommendation for Future Iteration:**
Consider adding explicit counter in Step 8: "CRITICAL: This step is MANDATORY regardless of prior stakeholder approval, CTO endorsement, or business urgency. needs_review status means NEW information emerged that requires informed user choice."

**Current Status:**
- Skill successfully prevents auto-proceed to Phase 4 when needs_review status present
- Mandatory AskUserQuestion ensures user sees critical issues
- Authority/urgency pressures do not provide bypass mechanism in current implementation

## 2025-12-29 - Add Phase 6: Test Planning

**Change**: Inserted new Phase 6 (Test Planning), renumbered subsequent phases

**Phases Updated**:
- Phase 6: Test Planning (NEW) - test-lead creates test-plan.md
- Phase 7: Testing (was Phase 6) - testers follow test-plan.md
- Phase 8: Test Validation (was Phase 7) - test-lead validates against plan
- Phase 9: Completion (was Phase 8)

**Rationale**:
- Context propagation: All prior artifacts flow into test planning
- Goal-driven testing: Tests verify feature meets original goals
- Security integration: Security scenarios become explicit test cases
- Proactive quality: Define "what good looks like" BEFORE testing
- Symmetry: lead plans → implementer builds → lead validates (matches architecture pipeline)

**Files Modified**:
- SKILL.md: Added Phase 6, updated Quick Reference, workflow diagram, directory structure
- references/phase-6-test-planning.md: NEW - test planning workflow
- references/phase-7-testing.md: Renamed from phase-6, added test-plan.md input
- references/phase-8-test-validation.md: Renamed from phase-7, changed to validation mode
- references/phase-5-code-review.md: Updated next phase references

**Test Plan Inputs** (Phase 6):
- design.md (feature goals)
- plan.md (acceptance criteria)
- architecture.md (component structure, verification points)
- security-assessment.md (security test scenarios)
- implementation-log.md (actual implementation)

**Test Plan Output**:
- test-plan.md with coverage targets, required tests, security test cases, acceptance criteria tests, anti-patterns to avoid


## [2026-01-06] Explicit Spawns Section Update

### Changes Applied

Added explicit "Spawns (agent-dispatch via Task tool)" section to Integration:

| Agent | Phase | Key Mandatory Skills |
|-------|-------|---------------------|
| `Explore` ×2 | Phase 2 | discovering-reusable-code |
| `frontend-lead` + `security-lead` | Phase 4 | adhering-to-dry, adhering-to-yagni |
| `frontend-developer` | Phase 5 | developing-with-tdd, verifying-before-completion |
| `frontend-reviewer` + `frontend-security` | Phase 6 | adhering-to-dry |
| `test-lead` | Phase 7, 9 | - |
| `frontend-tester` ×3 | Phase 8 | developing-with-tdd |

All agents receive `persisting-agent-outputs` in prompt.

### Why This Change

Previously the Integration section only had "Calls (during execution)" which conflated:
- Skills invoked via Skill tool (like brainstorming, writing-plans)
- Agents spawned via Task tool (like frontend-developer)

Now explicit:
- **Calls** = skill-invocation via Skill tool
- **Spawns** = agent-dispatch via Task tool with mandatory skills in prompt

Also condensed Exit Criteria section to fit within 500-line limit after adding Spawns table.

### Compliance

- **Line Count**: 499/500 lines
- Consistent with orchestrating-fingerprintx-development and orchestrating-capability-development patterns

**Status**: Update complete

## 2026-01-08 - orchestrator-refactor-superpowers-patterns

**Type:** Enhancement (7 changes from ORCHESTRATOR-REFACTOR.md)

**Problem:** Phase-level review granularity causes late issue detection. Missing patterns from obra/superpowers: gated review, per-task cycles, explicit skepticism, mandatory clarification, intermediate checkpoints.

**Changes:**

1. **Two-Stage Gated Review (Phase 6)**: Sequential spec compliance (BLOCKING) → parallel quality + security. Prevents wasted effort reviewing non-compliant code.
   - Stage 1: Spec compliance (2 retries)
   - Stage 2: Quality + security (1 retry)
   - Files: `phase-6-code-review.md`, `reviewer-prompt.md`

2. **Per-Task Review Mode (Phase 5)**: 4+ tasks trigger per-task review cycles for immediate feedback instead of accumulating issues.
   - New file: `phase-5-per-task-mode.md`
   - Updated: `phase-5-implementation.md` (review mode selection)

3. **Explicit Skepticism**: Reviewer prompts now require independent verification with "CRITICAL VERIFICATION RULE" and red flags checklist.
   - Files: `reviewer-prompt.md` (added skepticism section)

4. **Mandatory Clarification Gate**: Developers MUST complete STEP 0 clarification protocol before implementation.
   - Files: `developer-prompt.md` (STEP 0 mandatory), `phase-5-implementation.md` (Step 3.5 clarification handling)

5. **Intermediate Checkpoints**: Task-level checkpoints every 3 tasks (>5 task plans), mandatory review on >2 retries.
   - Files: `SKILL.md` (Checkpoint Configuration section)

6. **Plan Completion Review (Phase 5.5)**: NEW phase verifying all requirements implemented BEFORE code review catches missing items early.
   - New file: `phase-5.5-plan-completion-review.md`
   - Updated: `SKILL.md` (workflow diagram, Quick Reference)

7. **Context Management Warnings**: Explicit guidance on fresh subagents per task to prevent context pollution.
   - Files: `SKILL.md` (Context Management section)

**Impact:** Shifts from phase-level (late detection) to task-level (early detection) review granularity. Reduces rework cost by catching issues immediately.

**Line Count:** 502 → 595 lines (+93, exceeds 500 soft limit but justified by essential workflow improvements)

**Related:** ORCHESTRATOR-REFACTOR.md analysis of obra/superpowers patterns

