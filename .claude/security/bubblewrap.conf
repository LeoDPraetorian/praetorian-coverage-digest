#!/bin/bash
# Bubblewrap sandbox configuration for MCP code execution (Linux)
# Usage: bash .claude/security/bubblewrap.conf node script.js

bwrap \
  --ro-bind /usr /usr \
  --ro-bind /lib /lib \
  --ro-bind /lib64 /lib64 \
  --bind /tmp /tmp \
  --tmpfs /tmp \
  --ro-bind "$PWD/.claude/tools" /workspace/tools \
  --unshare-net \
  --unshare-pid \
  --die-with-parent \
  --new-session \
  --setenv NODE_ENV production \
  --setenv PATH /usr/bin:/bin \
  --clearenv \
  node "$@"
